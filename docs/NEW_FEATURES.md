# 新功能说明

## ✨ 功能更新

### 1. 项目创建系统

#### 访问路径
```
/admin/projects/create
```

或从 Projects 页面点击 "Create Project" 按钮

#### 功能特点

**搜索非营利组织**
- 从 Every.org API 实时搜索
- 支持关键词搜索（environment, wildlife, climate 等）
- 显示组织名称、Logo、描述、EIN 税号
- 直接链接到 Every.org 组织页面

**项目配置**
- 自动填充组织信息
- 自定义项目标题和描述
- 设置募款目标（1,000 - 1,000,000 USD）
- 选择画布大小：
  - 50x50 (2,500 像素)
  - 100x100 (10,000 像素)
  - 150x150 (22,500 像素)
  - 200x200 (40,000 像素)

**自动创建**
- 项目数据
- 默认 16 色调色板
- 空白画布

#### 使用步骤

1. 进入 `/admin/projects/create`
2. 搜索关键词（例如 "ocean", "forest", "wildlife"）
3. 从结果中选择一个组织
4. 编辑项目信息
5. 设置募款目标和画布大小
6. 点击 "Create Project"
7. 自动跳转到项目列表

---

### 2. 画布优化系统

#### 🔍 缩放功能

**方式 1: 鼠标滚轮**
- 向上滚动 = 放大
- 向下滚动 = 缩小
- 自动以鼠标位置为中心缩放

**方式 2: 控制按钮**
- 左上角 `+` 按钮放大
- 左上角 `-` 按钮缩小

**缩放范围**
- 最小: 25% (0.25x)
- 最大: 800% (8x)
- 当前缩放比例显示在右上角

**智能网格**
- 缩放 < 50% 时自动隐藏网格线
- 提升大画布性能

#### 🖱️ 平移功能

**方式 1: Shift + 左键拖拽**
- 按住 Shift 键
- 点击并拖拽画布

**方式 2: 中键拖拽**
- 按住鼠标中键
- 拖拽画布

**视觉反馈**
- 平移时光标变为 "grabbing"
- 提示信息显示在底部中央

#### 🖥️ 全屏模式

**开启方式**
- 点击左上角全屏按钮
- 或使用键盘快捷键（浏览器默认）

**全屏特性**
- 画布自动调整到 90vw x 90vh
- 深色背景减少干扰
- 居中显示画布
- 所有控制功能保持可用

**退出方式**
- 点击 X 按钮
- 按 ESC 键
- 按 F11（浏览器默认）

#### 🔄 重置视图

**功能**
- 一键重置缩放到 100%
- 重置平移到中心位置
- 恢复默认视图

**使用场景**
- 缩放过度时快速复原
- 平移迷失方向时
- 重新开始绘画时

#### 📍 坐标系统

**显示位置**
- 右下角（原位置）
- 实时显示鼠标位置的像素坐标

**格式**
- `X, Y` 格式
- 例如: `42, 58`
- 仅在画布内显示

#### 💡 提示信息

底部中央显示操作提示：
```
Tips: Scroll to zoom • Shift+Drag to pan • Middle-click to pan
```

---

## 🎮 完整操作指南

### 画布导航

| 操作 | 方式 1 | 方式 2 | 方式 3 |
|------|--------|--------|--------|
| 放大 | 滚轮向上 | 点击 + 按钮 | - |
| 缩小 | 滚轮向下 | 点击 - 按钮 | - |
| 平移 | Shift + 拖拽 | 中键拖拽 | - |
| 重置 | 点击重置按钮 | - | - |
| 全屏 | 点击全屏按钮 | F11 | - |

### 像素操作

| 操作 | 方式 |
|------|------|
| 选择颜色 | 右侧调色板 |
| 放置像素 | 点击画布位置 |
| 查看信息 | 悬停在已放置像素上 |
| 添加消息 | 画布下方输入框 |

### 项目创建

| 步骤 | 操作 |
|------|------|
| 1 | 点击 "Create Project" |
| 2 | 搜索非营利组织 |
| 3 | 选择组织 |
| 4 | 配置项目信息 |
| 5 | 设置参数 |
| 6 | 创建项目 |

---

## 🚀 性能优化

### 画布性能
- ✅ 大画布自动隐藏网格（scale < 0.5）
- ✅ 使用 Canvas 2D API 硬件加速
- ✅ 智能重绘，仅在需要时更新

### 交互优化
- ✅ 防抖处理鼠标事件
- ✅ 使用 Transform 实现平滑缩放/平移
- ✅ GPU 加速的 CSS transforms

### 全屏优化
- ✅ 自适应屏幕尺寸
- ✅ 保持画布比例
- ✅ 深色背景减少眼疲劳

---

## 📱 响应式设计

### 桌面端 (推荐)
- 完整功能支持
- 所有交互方式可用
- 最佳体验

### 平板端
- 触摸缩放支持
- 双指平移
- 全屏模式

### 移动端
- 基础功能可用
- 触摸操作
- 建议横屏使用

---

## 🔧 技术实现

### 画布系统
```typescript
- Base Canvas Size: 800x800px
- Transform: translate + scale
- Zoom Range: 0.25x - 8x
- Grid: Dynamic based on scale
```

### 项目创建
```typescript
- API: Every.org Partners API v0.2
- Authentication: API Key
- Rate Limit: 按 Every.org 规定
- Auto-create: Project + ColorPalette
```

---

## 🐛 已知限制

1. **浏览器兼容性**
   - 全屏 API 需要现代浏览器
   - 建议使用 Chrome/Edge/Firefox

2. **性能限制**
   - 超大画布 (200x200+) 可能较慢
   - 建议 100x100 以下

3. **权限限制**
   - 创建项目目前对所有登录用户开放
   - 生产环境应添加管理员角色检查

---

## 💡 使用建议

### 最佳实践
1. **缩放使用**：先缩小查看全局，再放大精确绘制
2. **平移使用**：Shift+拖拽比中键更精确
3. **全屏使用**：大型作品建议使用全屏模式
4. **项目创建**：先在 Every.org 确认组织真实性

### 快捷操作
- 双击画布 = 放大到该位置
- ESC = 退出全屏
- Shift+滚轮 = 快速缩放
- Space+拖拽 = 平移（浏览器默认）

---

## 📚 相关文档

- [API Integration Status](./API_INTEGRATION_STATUS.md)
- [How to Verify API](./HOW_TO_VERIFY_API.md)
- [README](../README.md)

---

**更新时间**: 2024-12-12
**版本**: 2.0.0

